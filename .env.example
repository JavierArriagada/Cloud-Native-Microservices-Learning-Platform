# =============================================================================
# Cloud-Native Microservices Learning Platform - Environment Variables
# =============================================================================
# Instrucciones:
# 1. Copiar este archivo como .env: cp .env.example .env
# 2. Ajustar valores según tu entorno
# 3. NUNCA commitear .env al repositorio
# =============================================================================

# =============================================================================
# GENERAL
# =============================================================================
COMPOSE_PROJECT_NAME=mlp
ENVIRONMENT=development

# =============================================================================
# POSTGRESQL DATABASE
# =============================================================================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=mlp_db
POSTGRES_USER=mlp_user
POSTGRES_PASSWORD=mlp_secret_change_in_production

# Database connection pool settings
POSTGRES_MIN_POOL_SIZE=5
POSTGRES_MAX_POOL_SIZE=20
POSTGRES_POOL_TIMEOUT=30

# =============================================================================
# FASTAPI BACKEND
# =============================================================================
# Database URL para asyncpg
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000
API_DEBUG=true
API_RELOAD=true

# CORS Settings
API_CORS_ORIGINS=["http://localhost","http://localhost:3000","http://localhost:80"]

# Security
API_SECRET_KEY=super-secret-key-change-in-production-min-32-chars
API_ALGORITHM=HS256
API_ACCESS_TOKEN_EXPIRE_MINUTES=30

# Logging
API_LOG_LEVEL=INFO

# =============================================================================
# DASH DASHBOARD
# =============================================================================
# API endpoint para Dash
API_URL=http://api:8000

# Dash Configuration
DASH_HOST=0.0.0.0
DASH_PORT=8050
DASH_DEBUG=true

# =============================================================================
# REACT FRONTEND
# =============================================================================
# API endpoint para React (desde browser)
VITE_API_URL=http://localhost/api
VITE_APP_NAME=Cloud-Native Learning Platform
VITE_APP_VERSION=1.0.0

# =============================================================================
# TRAEFIK API GATEWAY
# =============================================================================
TRAEFIK_DASHBOARD_PORT=8080
TRAEFIK_HTTP_PORT=80
TRAEFIK_HTTPS_PORT=443

# Basic Auth para Traefik Dashboard (user:password en base64)
# Default: admin:admin
TRAEFIK_DASHBOARD_AUTH=admin:$$apr1$$8EVjn/nj$$GiLUZqcbueTFeD23SuB6x0

# =============================================================================
# MONITORING - PROMETHEUS
# =============================================================================
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION=15d
PROMETHEUS_SCRAPE_INTERVAL=15s

# =============================================================================
# MONITORING - GRAFANA
# =============================================================================
GRAFANA_PORT=3001
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin_change_in_production

# Grafana Database (SQLite por defecto, usar Postgres en producción)
GF_DATABASE_TYPE=sqlite3
GF_DATABASE_PATH=/var/lib/grafana/grafana.db

# Grafana Security
GF_SECURITY_ADMIN_USER=${GRAFANA_ADMIN_USER}
GF_SECURITY_ADMIN_PASSWORD=${GRAFANA_ADMIN_PASSWORD}
GF_SECURITY_SECRET_KEY=grafana-secret-key-change-in-production

# Grafana Server
GF_SERVER_ROOT_URL=http://localhost:3001
GF_SERVER_SERVE_FROM_SUB_PATH=false

# =============================================================================
# MONITORING - LOKI
# =============================================================================
LOKI_PORT=3100
LOKI_RETENTION_PERIOD=168h

# =============================================================================
# MONITORING - PROMTAIL
# =============================================================================
PROMTAIL_PORT=9080

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================
# Docker buildkit
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1

# =============================================================================
# DEVELOPMENT
# =============================================================================
# Hot reload
WATCHFILES_FORCE_POLLING=true

# Node environment
NODE_ENV=development

# Python environment
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1

# =============================================================================
# TESTING
# =============================================================================
# Test database (usar base de datos separada para tests)
TEST_DATABASE_URL=postgresql+asyncpg://mlp_user:mlp_secret_change_in_production@postgres:5432/mlp_test_db

# Pytest
PYTEST_TIMEOUT=30

# =============================================================================
# CI/CD
# =============================================================================
# Container Registry (ajustar según tu registry)
DOCKER_REGISTRY=docker.io
DOCKER_USERNAME=your-dockerhub-username
DOCKER_REPOSITORY=mlp

# Image tags
IMAGE_TAG=latest
API_IMAGE=${DOCKER_REGISTRY}/${DOCKER_USERNAME}/${DOCKER_REPOSITORY}-api:${IMAGE_TAG}
DASH_IMAGE=${DOCKER_REGISTRY}/${DOCKER_USERNAME}/${DOCKER_REPOSITORY}-dash:${IMAGE_TAG}
REACT_IMAGE=${DOCKER_REGISTRY}/${DOCKER_USERNAME}/${DOCKER_REPOSITORY}-react:${IMAGE_TAG}

# =============================================================================
# CLOUD / KUBERNETES (GCP)
# =============================================================================
# GCP Project
GCP_PROJECT_ID=your-gcp-project-id
GCP_REGION=us-central1
GCP_ZONE=us-central1-a

# GKE Cluster
GKE_CLUSTER_NAME=mlp-cluster
GKE_CLUSTER_ZONE=${GCP_REGION}

# Cloud SQL (PostgreSQL en GCP)
CLOUD_SQL_INSTANCE=your-cloud-sql-instance
CLOUD_SQL_CONNECTION_NAME=${GCP_PROJECT_ID}:${GCP_REGION}:${CLOUD_SQL_INSTANCE}

# Secrets Manager (usar en producción)
USE_SECRET_MANAGER=false

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_API_DOCS=true
ENABLE_METRICS=true
ENABLE_CORS=true
ENABLE_RATE_LIMITING=false

# =============================================================================
# EXTERNAL SERVICES (Ejemplos)
# =============================================================================
# Redis (opcional, para cache)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Email (opcional, para notificaciones)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@example.com

# =============================================================================
# BACKUP & RECOVERY
# =============================================================================
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_STORAGE_PATH=/backups

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================
# API Workers (Uvicorn)
API_WORKERS=4
API_WORKER_CLASS=uvicorn.workers.UvicornWorker

# Database connection pool
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_PRE_PING=true

# =============================================================================
# OBSERVABILITY
# =============================================================================
# Jaeger Tracing (opcional)
JAEGER_ENABLED=false
JAEGER_AGENT_HOST=jaeger
JAEGER_AGENT_PORT=6831

# Sentry (opcional, para error tracking)
SENTRY_DSN=
SENTRY_ENVIRONMENT=${ENVIRONMENT}
SENTRY_TRACES_SAMPLE_RATE=1.0

# =============================================================================
# FIN DE VARIABLES
# =============================================================================
